<!DOCTYPE html>
<html>
  <head>
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />

    <link rel="stylesheet" href="StyleCarro.css" />

    <title>Carrito</title>

    <link rel="icon" href="images/Any-job-icon.ico" type="image/x-icon" />

    <style></style>
  </head>

  <body style="background-color: lightgray">
    <div class="navbar">
      <!-- Logo Izquierda -->

      <button
        class="buttonImageLogo"
        onclick="window.location.assign('AnyJobHome.html')"
      >
        <img
          src="images/Any Job Imagotipo chiquito.png"
          width="180"
          height="60"
          title="Any job"
        />
      </button>

      <!-- Buscador -->

      <div style="margin: 0 auto" class="search-box">
        <input type="text" placeholder="Herramientas..." />
        <button>
          <img
            src="https://cdn-icons-png.flaticon.com/512/622/622669.png"
            alt="Buscar"
          />
        </button>
      </div>

      <!-- Opciones -->

      <button
        class="buttonOpcion"
        onclick="window.location.assign('Perfil.html')"
      >
        <img
          src="images/navbar/Perfil Any Job.png"
          href=""
          width="28"
          height="33"
          title="Perfil"
        />
        <h3 id="bienvenida" style="color: white">Login</h3>
      </button>

      <button
        class="buttonOpcion"
        onclick="window.location.assign('Categorias.html')"
      >
        <img
          src="images/navbar/Pedidos.png"
          width="50"
          height="50"
          title="Catalogo de proveedores"
        />
      </button>
    </div>

    <!-- Carrito -->

    <div class="carrito-container">
      <div class="productos-lista" id="productosLista">
        <!-- Aquí se insertarán los productos con JS -->
      </div>
      <div class="resumen-compra">
        <h2>Resumen de compra</h2>
        <p><strong>Producto:</strong> $<span id="subtotal">0.00</span></p>
        <p><strong>Envío:</strong> Gratis</p>
        <p><strong>Total:</strong> $<span id="total">0.00</span></p>
        <button class="btn-comprar">Continuar compra</button>
      </div>
    </div>

    <script>
      //----------------------------------------------CARRITO----------------------------------------------
      const productos = [
        {
          id: 1,
          nombre: "Producto 1",
          precio: 100,
          imagen: "ruta/imagen1.png",
        },
        {
          id: 2,
          nombre: "Producto 2",
          precio: 150,
          imagen: "ruta/imagen2.png",
        },
      ];

      function agregarAlCarrito(producto) {
        const lista = document.getElementById("productosLista");

        const item = document.createElement("div");
        item.className = "producto-item";
        item.innerHTML = `
          <img src="${producto.imagen}" alt="${producto.nombre}">
          <div>
            <h4>${producto.nombre}</h4>
            <p>$${producto.precio.toFixed(2)}</p>
          </div>
        `;
        lista.appendChild(item);

        actualizarTotal();
      }

      function actualizarTotal() {
        const precios = [...document.querySelectorAll(".producto-item p")].map(
          (p) => parseFloat(p.textContent.replace("$", ""))
        );

        const subtotal = precios.reduce((acc, val) => acc + val, 0);
        document.getElementById("subtotal").textContent = subtotal.toFixed(2);
        document.getElementById("total").textContent = subtotal.toFixed(2);
      }

      //----------------------------------------------LOCALSTORAGE----------------------------------------------

      const nombre = localStorage.getItem("nombre");

      window.addEventListener("DOMContentLoaded", () => {
        const nombreGuardado = localStorage.getItem("usuarioNombre");
        if (nombreGuardado) {
          document.getElementById("bienvenida").textContent = nombreGuardado;
        }
      });
    </script>
  </body>
</html>
