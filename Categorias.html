<!DOCTYPE html>
<html>
  <head>
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />

    <link rel="stylesheet" href="StyleC.css" />

    <title>Productos</title>

    <link rel="icon" href="images/Any-job-icon.ico" type="image/x-icon" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
      }

      .navbar {
        background-color: #003f63;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 20px;
      }

      .buttonImageLogo {
        background: none;
        border: none;
        cursor: pointer;
        margin-left: 5px;
      }

      .search-box-a {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .search-box-precio {
        border: 2px solid #ccc;
        border-radius: 5px;
        padding: 5px 5px;
        width: 70px;
        background-color: white;
      }
      .search-box-precio input {
        border: none;
        outline: none;
        flex: 1;
        padding: 5px;
        font-size: 14px;
        background: transparent;
      }

      .search-box {
        display: flex;
        align-items: center;
        border: 2px solid #ccc;
        border-radius: 10px;
        padding: 5px 10px;
        width: 500px;
        background-color: white;
      }

      .search-box input {
        border: none;
        outline: none;
        flex: 1;
        padding: 5px;
        font-size: 16px;
        background: transparent;
      }

      .search-box input::placeholder {
        font-style: italic;
        color: #aaa;
      }

      .search-box button {
        background: none;
        border: none;
        cursor: pointer;
      }

      .search-box button img {
        width: 20px;
        height: 20px;
      }

      .buttonOpcion {
        background: none;
        border: none;
        cursor: pointer;
        margin-right: 35px;
      }

      .carousel {
        position: relative;
        max-width: auto;
        margin: auto;
        overflow: hidden;
      }

      .slides {
        display: flex;
        transition: transform 0.5s ease-in-out;
      }

      .slide {
        min-width: 100%;
        box-sizing: border-box;
      }

      .slide img {
        width: 100%;
        display: block;
      }

      .familyContainer {
        display: flex;
        padding-left: 80px;
        padding-right: 80px;
      }

      .familyContainer > div {
        width: auto;
        display: inline-block;
        margin: auto;
        border-radius: 10px;
        background-color: #ffffff;
        text-align: center;
      }
    </style>
  </head>

  <body style="background-color: #e3f2fd">
    <div class="navbar">
      <!-- Logo Izquierda -->

      <button
        class="buttonImageLogo"
        onclick="window.location.assign('AnyJobHome.html')"
      >
        <img
          src="images/Any Job Imagotipo chiquito.png"
          width="180"
          height="60"
          title="Any job"
        />
      </button>

      <!-- Buscador -->

      <div style="margin: 0 auto" class="search-box">
        <input type="text" placeholder="Herramientas..." />
        <button>
          <img
            src="https://cdn-icons-png.flaticon.com/512/622/622669.png"
            alt="Buscar"
          />
        </button>
      </div>

      <!-- Opciones -->

      <button
        class="buttonOpcion"
        onclick="window.location.assign('Perfil.html')"
      >
        <img
          src="images/navbar/Perfil Any Job.png"
          href=""
          width="38"
          height="43"
          title="Perfil"
        />
        <h3 id="bienvenida" style="color: white">Login</h3>
      </button>

      <button
        class="buttonOpcion"
        onclick="window.location.assign('Carrito.html')"
      >
        <img
          src="images/navbar/Carrito de compras.png"
          width="43"
          height="43"
          title="Carrito de compras"
        />
      </button>
    </div>

    <br />
    <br />
    <br />

    <div class="contenedor">
      <div
        class="categorias"
        style="
          background-color: #e3f2fd;
          border: 2px solid lightgray;
          margin-top: 10px;
          margin-left: 10px;
          padding-top: 10px;
          padding-bottom: 10px;
          border-radius: 5px;
        "
      >
        <h3 style="font-weight: bold">Categoria</h3>
        <br />

        <p class="familias">Herramientas</p>
        <p class="familias">Materiales</p>
        <p class="familias">Electricos</p>
        <p class="familias">Pinturas</p>

        <br />

        <h3 style="font-weight: bold">Marca</h3>
        <br />

        <p class="familias">Truper</p>
        <p class="familias">Pretul</p>
        <p class="familias">Makita</p>
        <p class="familias">Cemex</p>
        <p class="familias">Husky</p>
        <p class="familias">Comex</p>

        <br />

        <h3 style="font-weight: bold">Precio</h3>
        <div class="search-box-a">
          <div class="search-box-precio">
            <input type="text" placeholder="Min." />
          </div>
          <h2>-</h2>
          <div class="search-box-precio">
            <input type="text" placeholder="Max." />
          </div>
        </div>
      </div>

      <div class="carrusel">
        <div class="carrusel-contenido" id="carrusel"></div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-section">
        <h2>Información</h2>
        <a href="#">Acerca de nosotros</a>
        <a href="#">Términos y condiciones</a>
        <a href="#">Aviso de privacidad</a>
      </div>

      <div class="footer-section">
        <h2>Atención al cliente</h2>
        <a href="#">Garantías</a>
        <a href="#">Devoluciones</a>
        <a href="#">Facturación</a>
      </div>

      <div class="footer-section">
        <h2>Contáctanos</h2>
        <p>📞 800 00 ANY JOB</p>
        <p>✉️ servicioac@anyjob.com.mx</p>
        <div class="social-icons">
          <a href="#"
            ><img src="images/icons/facebook.svg" alt="Facebook" />Facebook</a
          >
          <a href="#"
            ><img
              src="images/icons/instagram.svg"
              alt="Instagram"
            />Instagram</a
          >
          <a href="#"
            ><img src="images/icons/twitter.svg" alt="Twitter" />Twitter</a
          >
        </div>
      </div>
    </footer>

      <div class="imgFooter">
        <img src="images/Any job isotipo.png" alt="Isotipo" />
      </div>
    </footer>
    <script>
      //filtrar
      // Función para obtener parámetros de la URL
      function obtenerFiltro() {
        const params = new URLSearchParams(window.location.search);
        const filtro = params.get("filtro"); // e.g., "Truper"
        if (filtro) {
          aplicarFiltro(filtro);
          console.log = filtro;
        }
      }

      // Función que ejecuta el filtro (la defines tú)
      function aplicarFiltro(filtro) {
        console.log("Aplicando filtro:", filtro);
        // Aquí podrías ocultar/mostrar productos según el filtro recibido
        // Por ejemplo, podrías recorrer las tarjetas y ocultar las que no coincidan
        const tarjetas = document.querySelectorAll(".tarjetaProducto");
        tarjetas.forEach((tarjeta) => {
          const nombre = tarjeta.getAttribute("data-marca");
          if (nombre.toLowerCase() === filtro.toLowerCase()) {
            tarjeta.style.display = "block";
          } else {
            tarjeta.style.display = "none";
          }
        });
      }

      // Llamar al obtenerFiltro cuando cargue la página
      window.onload = obtenerFiltro;

      async function cargarProductos() {
        try {
          // Hacer la petición fetch a getProductos.php
          const response = await fetch("phps/getProductos.php");
          const productos = await response.json(); // Suponemos que el PHP devuelve un JSON

          // Seleccionar el contenedor donde se listarán los productos
          const contenedorProductos = document.getElementById("carrusel");

          // Limpiar el contenedor antes de agregar los productos
          contenedorProductos.innerHTML = "";

          // Recorrer el arreglo de productos y crear los elementos para cada producto
          productos.forEach((producto) => {
            const productoDiv = document.createElement("div");
            productoDiv.classList.add("producto");

            // Crear los elementos HTML para cada producto
            const img = document.createElement("img");
            img.src = producto.ligaIMG; // Suponemos que la imagen está en la propiedad 'imagen'
            img.alt = producto.nombre;

            const nombre = document.createElement("h3");
            nombre.textContent = producto.nombre;

            const precio = document.createElement("p");
            precio.textContent = `$${producto.precio}`;

            const boton = document.createElement("button");
            boton.classList.add("boton-agregar");
            boton.textContent = "Añadir al carrito";

            // Agregar los elementos al contenedor del producto
            productoDiv.appendChild(img);
            productoDiv.appendChild(nombre);
            productoDiv.appendChild(precio);
            productoDiv.appendChild(boton);

            // Agregar el producto al carrusel
            contenedorProductos.appendChild(productoDiv);
          });
        } catch (error) {
          console.error("Error al cargar los productos:", error);
        }
      }

      // Llamar la función para cargar los productos cuando la página cargue
      window.onload = cargarProductos;

      //----------------------------------------------LOCALSTORAGE----------------------------------------------

      const nombre = localStorage.getItem("nombre");

      window.addEventListener("DOMContentLoaded", () => {
        const nombreGuardado = localStorage.getItem("usuarioNombre");
        if (nombreGuardado) {
          document.getElementById("bienvenida").textContent = nombreGuardado;
        }
      });
    </script>
  </body>
</html>
